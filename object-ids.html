<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at Feb 13, 2013
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20130213" />
    <meta http-equiv="Content-Language" content="en" />
    <title></title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
    
    
            
    
    
    <a href="http://github.com/jroper/mongojack">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="./" id="bannerLeft">
                <h2>MongoJack</h2>
                </a>
                      </div>
        <div class="pull-right">              <div id="bannerRight">
                                                                                                <img src="images/mongodb-leaf.png" />
                </div>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
            
                  <li id="publishDate">Last Published: 2013-02-13</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 2.0.0-SNAPSHOT</li>
                      
                
            
      
                                              
    <li class="pull-right">              <a href="http://maven.apache.org/" class="externalLink" title="Maven 2">
        Maven 2</a>
  </li>

        <li class="divider pull-right">|</li>
      
    <li class="pull-right">              <a href="http://maven.apache.org/maven-1.x/" class="externalLink" title="Maven 1.x">
        Maven 1.x</a>
  </li>

        <li class="divider pull-right">|</li>
      
    <li class="pull-right">              <a href="http://www.apache.org/" class="externalLink" title="Apache">
        Apache</a>
  </li>

                        </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
            
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                                
      <li>
    
                          <a href="index.html" title="About">
          <i class="none"></i>
        About</a>
            </li>
                  
      <li>
    
                          <a href="installation.html" title="Installation">
          <i class="none"></i>
        Installation</a>
            </li>
                  
      <li>
    
                          <a href="tutorial.html" title="Tutorial">
          <i class="none"></i>
        Tutorial</a>
            </li>
                  
      <li>
    
                          <a href="changelog.html" title="Changelog">
          <i class="none"></i>
        Changelog</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                        
      <li>
    
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                                      
      <li>
    
                          <a href="project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
            
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Using Object IDs</h1><p>The simplest way to use ObjectId elements, both for document IDs and also for references to other documents (or anything) is to declare the field to have a type of <code>org.bson.types.ObjectId</code>. The Mongo Jackson Mapper will handle serialisation/deserialisation of these with no problems, no extra configuration is required.</p><p>However, there are some use cases where you may not want to use the ObjectId type, for example, if the same objects get serialised to the web, or if you just prefer dealing with more basic types. Mongo Jackson Mapper provides <em>some</em> support for this, though there are a few areas that you need to be careful about.</p><h2>@ObjectId</h2><p>The <code>@net.vz.mongodb.jackson.ObjectId</code> annotation can be added to any <code>String</code> or <code>byte[]</code> field to indicate that you want its value to be stored as an ObjectId. It can also be added to <code>net.vz.mongodb.jackson.DBRef</code> fields who&rsquo;s ID type paramater is <code>String</code> or <code>byte[]</code>, as well as collection/array fields and <code>Map</code> fields. This annotation instructs the Mongo Jackson Mapper to serialise the given value into an ObjectId, and deserialise any encountered ObjectIds into the type of the field. The following are all valid uses:</p>
<pre><code>public class MyClass {
    @ObjectId
    public String _id;
    @ObjectId
    public byte[] someArbitraryId;
    @ObjectId
    public List&lt;String&gt; arbitraryCollectionOfIds;
    @ObjectId
    public DBRef&lt;AnotherClass, byte[]&gt; anotherObject;
    @ObjectId
    public List&lt;DBRef&lt;AnnotherClass, String&gt; collectionOfOtherObjects;
    @ObjectId
    public Map&lt;String, String&gt; mapOfStringsToObjectIds;
}
</code></pre><p>What is not currently supported is multi dimensional arrays/collections. Serialising map keys to ObjectIds are naturally not supported because MongoDB does not support ObjectIds as key values.</p><p>If using getters and setters, the annotation must be added to <em>both</em> the getter and the setter, for example:</p>
<pre><code>public class MyClass {
    private String someId;
    @ObjectId
    public String getSomeId() {
        return someId;
    }
    @ObjectId
    public void setSomeId(String someId) {
        this.someId = someId;
    }
}
</code></pre><p>If using property based <code>@JsonCreator</code> methods, then it must be added to the parameter:</p>
<pre><code>public class MyClass {
    private final String someId;
    @JsonCreator
    public MyClass(@ObjectId @JsonProperty(&quot;someId&quot;) someId) {
        this.someId = someId;
    }
    @ObjectId
    public String getSomeId() {
        return someId;
    }
}
</code></pre><p>If using custom (de)serialisers or delegate <code>@JsonCreator</code> methods, then you will need to handle the ObjectIds yourself.</p><p>If the setter for the <code>_id</code> field of the object is annotated with <code>@ObjectId</code>, then the <code>*ById()</code> methods on <code>JacksonDBCollection</code> will use serialise the passed in parameter to an ObjectId for you, and <code>WriteResult.getSavedId()</code> will deserialise it from ObjectId. If using a custom deserialiser for the bean, this will not work, even if the getter for the property is annotated with <code>@ObjectId</code>. This may be fixed in future, and is dependent on support from Jackson to give better information about configured serialisers.</p><h2>Querying ObjectId fields</h2><p>At current, the Mongo Jackson Mapper does not convert Strings and byte arrays in queries and updates to ObjectIds. It is planned in future that it may support this, dependent on Jackson supporting new features for looking up arbitrary serialisers/deserialisers for given fields. To query a field that is of type ObjectId, you must supply a <code>org.json.types.ObjectId</code> value, regardless of whether the field is annotated with <code>@ObjectId</code>. For example:</p>
<pre><code>String myStringId = ...
coll.find(DBQuery.is(&quot;someId&quot;, new ObjectId(myStringId));
</code></pre>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2011-2013
                        <a href="http://vz.net">VZ Netzwerke</a>.
            All Rights Reserved.      
            
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
