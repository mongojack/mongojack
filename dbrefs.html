<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/markdown/dbrefs.md at 2024-08-20
 | Rendered using Apache Maven Fluido Skin 1.8
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>MongoDB Jackson Mapper &#x2013; Database References</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.8.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.8.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <a href="https://github.com/mongojack/mongojack">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
        alt="Fork me on GitHub">
    </a>
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="./" id="bannerLeft"><h2>MongoJack</h2>
</a></div>
          <div class="pull-right"><div id="bannerRight"><img src="images/mongodb-leaf.png"  alt=""/></div>
</div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2024-08-20<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 5.0.1</li>
      <li class="pull-right"><span class="divider">|</span>
<a href="http://maven.apache.org/" class="externalLink" title="Maven 3">Maven 3</a></li>
      <li class="pull-right"><a href="http://www.apache.org/" class="externalLink" title="Apache">Apache</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="index.html" title="About"><span class="none"></span>About</a></li>
    <li><a href="installation.html" title="Installation"><span class="none"></span>Installation</a></li>
    <li><a href="tutorial.html" title="Tutorial"><span class="none"></span>Tutorial</a></li>
    <li><a href="changelog.html" title="Changelog"><span class="none"></span>Changelog</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<h1>Database References</h1>
<p>The <a class="externalLink" href="http://www.mongodb.org/display/DOCS/Database+References">MongoDB documentation</a> for database references recommends against using database references, because it is usually simpler to just use direct/manual references.
The author of this documentation is of the same opinion.  However, MongoJack does support this convention of storage.</p><section>
<h2><a name="Declaring"></a>Declaring</h2>
<p>A field can be declared to be a DBRef by using the type <code>org.mongojack.DBRef</code>. For example:</p>

<div class="source"><pre class="prettyprint"><code>public class User {
    @Id
    public String name;
    public DBRef&lt;City, String&gt; city;
}
</code></pre></div>
<p>The type parameters indicate the type of the object that is referenced and the type of the id of the referenced type.</p></section><section>
<h2><a name="Constructing"></a>Constructing</h2>
<p>Constructing the type can be done using a constructor:</p>

<div class="source"><pre class="prettyprint"><code>DBRef berlinRef = new DBRef&lt;City, String&gt;(&quot;Berlin&quot;, City.class, &quot;cities&quot;, null);
</code></pre></div>
<p>The arguments are the id of the referenced document, the document class, the collection name and database name of the collection.
An alternative method for constructing DBRefs may be used, by annotating the referenced class with a <code>org.mongojack.MongoCollection</code> annotation, which describes the name of the collection the type belongs to:</p>

<div class="source"><pre class="prettyprint"><code>@MongoCollection(name = &quot;cities&quot;)
public class City {
    @Id
    public String name;
    public String country;
    public int population;
}
</code></pre></div>
<p>If the referenced class has this annotation, you can then construct a DBRef by passing in the type of the collection:</p>

<div class="source"><pre class="prettyprint"><code>DBRef berlinRef = new DBRef&lt;City, String&gt;(&quot;Berlin&quot;, City.class);
</code></pre></div></section><section>
<h2><a name="Using_and_fetching"></a>Using and fetching</h2>
<p>The ID and name of the collection can be accessed using simple getters.</p>

<div class="source"><pre class="prettyprint"><code>User user = userCollection.findOneById(&quot;userId&quot;);
</code></pre></div>
<p>If you want to fetch the referenced object, you can use <code>DbReferenceManager</code>, which can fetch single or multiple references from different collections.  We recommend initializing <code>DbReferenceManager</code>
with specific constructed collections, but it is possible to have <code>DbReferenceManager</code> create the necessary collection references for you, if they need no special setup.</p>

<div class="source"><pre class="prettyprint"><code>DbReferenceManager manager = new DbReferenceManager(mongoClient, &quot;locations&quot;) // where &quot;locations&quot; is the default default database name to be used by the manager if the ref's contain no DB Name.
City city = manager.fetch(user.city);
</code></pre></div></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &#169;      2011&#x2013;2024<a href="http://www.devbliss.com">devbliss GmbH</a>.
.</p>
        </div>
      </div>
    </footer>
  </body>
</html>